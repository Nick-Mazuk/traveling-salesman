!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,e){var i=e.get(t);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(t):i.value}i.r(e);class o{constructor(t,e){n(this,"cityA",void 0),n(this,"cityB",void 0),r.set(this,{writable:!0,value:3}),a.set(this,{writable:!0,value:"#757575"}),this.cityA=t,this.cityB=e}draw(t){t.beginPath(),t.moveTo(this.cityA.xPos,this.cityA.yPos),t.lineTo(this.cityB.xPos,this.cityB.yPos),t.strokeStyle=s(this,a),t.lineWidth=s(this,r),t.stroke()}length(){return this.cityA.distanceFromCity(this.cityB)}}var r=new WeakMap,a=new WeakMap;function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class h{constructor(t=[]){c(this,"cities",void 0),c(this,"roads",void 0),c(this,"totalLength",void 0),this.cities=[],t.forEach(t=>this.cities.push(t)),this.roads=[]}length(){this._createRoads();let t=0;return this.roads.forEach(e=>t+=e.length()),this.totalLength=t,t}_createRoads(){if(this.roads=[],this.cities.length>2){for(let t=0;t<this.cities.length-1;t++)this.roads.push(new o(this.cities[t],this.cities[t+1]));this.roads.push(new o(this.cities[this.cities.length-1],this.cities[0]))}return this.roads}addCity(t){this.cities.push(t)}draw(t){t.clearRect(0,0,t.canvas.clientWidth,t.canvas.clientHeight),this._createRoads(),this.roads.forEach(e=>e.draw(t)),this.cities.forEach(e=>e.draw(t))}positionInCity(t,e){return this.cities.filter(i=>i.pointIsInCity(t,e))}randomizeRoute(){this.cities=this.cities.sort(()=>Math.random()-.5)}getRandomCityIndex(t=0,e=this.cities.length){return(Math.floor(Math.random()*Math.min(this.cities.length,e))+t)%this.cities.length}getCityByIndex(t){return this.cities[t]}swapCitiesByIndex(t,e){let i=this.cities[t];this.cities[t]=this.cities[e],this.cities[e]=i}removeCity(t){this.cities=this.cities.filter(e=>e.xPos!=t.xPos&&e.yPos!=t.yPos)}findNeighbors(t){if(0==this.cities.includes(t))throw new Error("City is not in tour, cannot find neighbors");if(this.cities.length<3)throw new Error("Tour does not have enough cities to find neighbors");let e=[],i=this.cities.indexOf(t);switch(i){case 0:e.push(this.cities[this.cities.length-1]),e.push(this.cities[1]);break;case this.cities.length-1:e.push(this.cities[i-1]),e.push(this.cities[0]);break;default:e.push(this.cities[i-1]),e.push(this.cities[i+1])}return e}cityNeighborsAreClosest(t){const e=this.findNeighbors(t),i=Math.max(...e.map(e=>t.distanceFromCity(e)));for(let n=0;n<this.cities.length;n++){if(e.includes(this.cities[n])||this.cities[n]==t)continue;if(t.distanceFromCity(this.cities[n])<=i)return!1}return!0}clear(){this.cities=[],this.roads=[]}}class l{static optimize(t,e,i,n){if(t.cities.length<4)return t;switch(e){case"annealing":t=l.annealing(t,i,!!n);break;case"greedy":t=l.greedy(t);break;case"bogo":t=l.bogo(t);break;default:t=l.annealing(t,i,!!n)}return t}static annealing(t,e,i,n=150,s=.001){function o(t,e,i){return i*(1-t/e)+1e-4}null!=e&&(n=(e.getBoundingClientRect().width+e.getBoundingClientRect().height)/18);let r=i?1.8:2.5,a=100*t.cities.length+(t.cities.length>10?(t.cities.length-10)**r:0),c=0,l=t.length(),d=new h(t.cities),u=d,g=l;for(;c<a;){let t=o(c,a,n);const e=new h(u.cities),i=e.getRandomCityIndex();let s=e.getRandomCityIndex(i,t);for(;i==s;)s=e.getRandomCityIndex();e.swapCitiesByIndex(i,s);const r=e.length();(r<g||Math.random()<=Math.exp(-Math.abs(r-g)/t))&&(u=new h(e.cities),g=r),r<l&&(l=e.length(),d=e),c++}return d}static greedy(t){if(t.cities.length<4)return t;for(let e=0;e<t.cities.length-1;e++){let i=e+1,n=1/0;for(let s=i;s<t.cities.length;s++){let o=t.cities[e].distanceFromCity(t.cities[s]);o<n&&(i=s,n=o)}t.swapCitiesByIndex(e+1,i)}return t}static bogo(t){return t.randomizeRoute(),t}}function d(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class u{constructor(t,e,i){d(this,"xPos",void 0),d(this,"yPos",void 0),d(this,"canvas",void 0),g.set(this,{writable:!0,value:"#757575"}),this.canvas=i,this.move(t,e)}draw(t){t.beginPath(),t.arc(this.xPos,this.yPos,u.radius,0,2*Math.PI),t.fillStyle=function(t,e){var i=e.get(t);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(t):i.value}(this,g),t.fill()}pointIsInCity(t,e){return this.distanceFromPoint(t,e)<u.radius}distanceFromPoint(t,e){return Math.sqrt((t-this.xPos)**2+(e-this.yPos)**2)}distanceFromCity(t){return Math.sqrt((t.xPos-this.xPos)**2+(t.yPos-this.yPos)**2)}move(t,e){t<u.radius&&(t=u.radius),e<u.radius&&(e=u.radius),t>this.canvas.getBoundingClientRect().width-u.radius&&(t=this.canvas.getBoundingClientRect().width-u.radius),e>this.canvas.getBoundingClientRect().height-u.radius&&(e=this.canvas.getBoundingClientRect().height-u.radius),this.xPos=t,this.yPos=e}}var g=new WeakMap;let f,m;d(u,"radius",10);let y,b,p,v,w=new h,C={force:"<b>Brute Force Algorithm</b>: Checks every possible path, guarantees shortest path",greedy:"<b>Greedy Algorithm</b>: Each node goes to the next closest node, finds suboptimal path excluding trivial cases",hillClimber:"<b>Hill Climber Algorithm</b>: Compares tiny changes to current path, chooses better one",annealing:"<b>Annealing Algorithm</b>: Like hill climber but avoids local minimums",genetic:"<b>Genetic Algorithm</b>: Simulates all of human life",uncrossing:"<b>Uncrossing Algorithm</b>: Chooses random path, then uncrosses intersections",speedy:"<b>Speedy Algorithm</b>: A custom algorithm that combines greedy, annealing, and uncrossing algorithms",bogo:"<b>Bogo-Style Algorithm</b>: Chooses random path, odds of finding shortest path is 1:(n - 1)!"};function P(t=!1){let e=performance.now();w=t?l.optimize(w,p,f,y):l.optimize(w,p,f);let i=performance.now();v.innerHTML=(i-e).toFixed(3),w.draw(m)}function x(t){return[t.clientX-f.getBoundingClientRect().left,t.clientY-f.getBoundingClientRect().top]}function B(t){if(!(3==t.which||2==t.button)){b=x(t);let i=(null==e&&(e=b),w.positionInCity(e[0],e[1]));i.length?y=i[0]:function(t){let e=t.clientX-f.getBoundingClientRect().left-u.radius/2,i=t.clientY-f.getBoundingClientRect().top-u.radius/2,n=new u(e,i,f);w.addCity(n),P()}(t)}var e}function M(t){let e=x(t);var i,n;y&&(i=e,n=b,Math.sqrt((i[0]-n[0])**2+(i[1]-n[1])**2)<u.radius)&&(w.removeCity(y),y=void 0,P()),b=void 0,y=void 0}function R(t){if(y){let e=x(t);y.move(e[0],e[1]),P(!0)}}function E(){p=document.getElementById("algorithm-mode").value,w.randomizeRoute(),P(),document.querySelector("#algorithm-descriptions").innerHTML=C[p]}function I(){const t=f.getBoundingClientRect().width,e=f.getBoundingClientRect().height,i=u.radius;w.clear();for(let n=0;n<7;n++){const n=new u(Math.floor(Math.random()*(t-2*i))+i,Math.floor(Math.random()*(e-2*i))+i,f);w.addCity(n)}E()}function A(){w.clear(),P()}window.addEventListener("DOMContentLoaded",(function(){f=document.querySelector("canvas"),v=document.querySelector("#timing"),function(t){const e=window.devicePixelRatio||1,i=t.getBoundingClientRect();t.width=i.width*e,t.height=i.height*e,m=t.getContext("2d"),m.scale(e,e),t.addEventListener("mousedown",B),t.addEventListener("mouseup",M),t.addEventListener("mousemove",R)}(f),document.getElementById("algorithm-mode").addEventListener("change",E),document.getElementById("clear-board").addEventListener("click",A),document.getElementById("random-board").addEventListener("click",I),I()}))}]);