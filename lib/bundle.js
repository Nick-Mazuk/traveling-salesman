!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,e){var i=e.get(t);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(t):i.value}i.r(e);class o{constructor(t,e){n(this,"cityA",void 0),n(this,"cityB",void 0),r.set(this,{writable:!0,value:3}),h.set(this,{writable:!0,value:"#757575"}),a.set(this,{writable:!0,value:"#FCCE00"}),this.cityA=t,this.cityB=e}draw(t,e){t.beginPath(),t.moveTo(this.cityA.xPos,this.cityA.yPos),t.lineTo(this.cityB.xPos,this.cityB.yPos),t.strokeStyle=s(this,h),e&&(t.strokeStyle=s(this,a)),t.lineWidth=s(this,r),t.stroke()}length(){return this.cityA.distanceFromCity(this.cityB)}}var r=new WeakMap,h=new WeakMap,a=new WeakMap;function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class l{constructor(t=[]){c(this,"cities",void 0),c(this,"roads",void 0),c(this,"totalLength",void 0),this.cities=t.slice(),this.roads=[]}length(){let t=0;if(0==this.cities.length)return 0;for(let e=0;e<this.cities.length-1;e++)t+=this.cities[e].distanceFromCity(this.cities[e+1]);return t+=this.cities[0].distanceFromCity(this.cities[this.cities.length-1]),this.totalLength=t,t}_createRoads(){if(this.roads=[],this.cities.length>2){for(let t=0;t<this.cities.length-1;t++)this.roads.push(new o(this.cities[t],this.cities[t+1]));this.roads.push(new o(this.cities[this.cities.length-1],this.cities[0]))}return this.roads}addCity(t){this.cities.push(t)}draw(t,e,i,n,s){t.clearRect(0,0,t.canvas.clientWidth,t.canvas.clientHeight),e.length&&(t.beginPath(),t.rect(0,0,t.canvas.clientWidth,t.canvas.clientHeight),t.fillStyle="#171717",t.fill(),e.forEach(e=>e.draw(t,i,n))),this._createRoads(),this.roads.forEach(e=>e.draw(t,s)),this.cities.forEach(e=>e.draw(t,s,Math.min(i,n)))}positionInCity(t,e){return this.cities.filter(i=>i.pointIsInCity(t,e))}randomizeRoute(){this.cities=this.cities.sort(()=>Math.random()-.5)}getRandomCityIndex(t=0,e=this.cities.length){return(Math.ceil(Math.random()*Math.min(this.cities.length-1,e))+t)%this.cities.length}getCityByIndex(t){return this.cities[t]}getLengthChangeFromSwappingCities(t,e){if(t==e)return 0;if(t>e){let i=t;t=e,e=i}let i=0,n=this.cities[t],s=this.cities[e],o=this.cities[0==t?this.cities.length-1:t-1],r=this.cities[(e+1)%this.cities.length];return i+=n.distanceFromCity(o),i+=s.distanceFromCity(r),i-=n.distanceFromCity(r),i-=s.distanceFromCity(o),i<.001&&i>-.001&&(i=0),i}swapCitiesByIndex(t,e){if(t==e)return;if(t>e){let i=t;t=e,e=i}let i=this.cities.slice();this.cities=[...i.slice(0,t)],this.cities.push(...i.slice(t,e+1).reverse()),this.cities.push(...i.slice(e+1))}removeCity(t){this.cities=this.cities.filter(e=>e.xPos!=t.xPos||e.yPos!=t.yPos)}findNeighbors(t){if(0==this.cities.includes(t))throw new Error("City is not in tour, cannot find neighbors");if(this.cities.length<3)throw new Error("Tour does not have enough cities to find neighbors");let e=[],i=this.cities.indexOf(t);switch(i){case 0:e.push(this.cities[this.cities.length-1]),e.push(this.cities[1]);break;case this.cities.length-1:e.push(this.cities[i-1]),e.push(this.cities[0]);break;default:e.push(this.cities[i-1]),e.push(this.cities[i+1])}return e}cityNeighborsAreClosest(t){const e=this.findNeighbors(t),i=Math.max(...e.map(e=>t.distanceFromCity(e)));for(let n=0;n<this.cities.length;n++){if(e.includes(this.cities[n])||this.cities[n]==t)continue;if(t.distanceFromCity(this.cities[n])<=i)return!1}return!0}clear(){this.cities=[],this.roads=[],this.totalLength=void 0}static getPermutations(t){return(t=>{let e=[];const i=(t,n=[])=>{if(0===t.length)e.push(n);else for(let e=0;e<t.length;e++){let s=t.slice(),o=s.splice(e,1);i(s.slice(),n.concat(o))}};return i(t),e})(t.cities)}}class d{static optimize(t,e,i,n){if(t.cities.length<4)return t;switch(n||(t=d.bogo(t)),e){case"annealing":t=d.annealing(t,i,!!n);break;case"greedy":t=d.greedy(t);break;case"bogo":t=d.bogo(t);break;case"force":t=d.force(t);break;case"uncross":t=d.uncross(t,!!n);break;case"speedy":t=d.speedy(t,n);break;default:t=d.speedy(t,n)}return t}static annealing(t,e,i,n=150){function s(t,e,i){return i*(1-t/e)+1e-4}i||(t=d.greedy(t)),null!=e&&(n=(e.getBoundingClientRect().width+e.getBoundingClientRect().height)/18);let o=i?1.8:2.5,r=100*t.cities.length+(t.cities.length>10?(t.cities.length-10)**o:0),h=0,a=t.length(),c=new l(t.cities),u=c,g=a;for(;h<r;){let t=s(h,r,n);const e=new l(u.cities),i=e.getRandomCityIndex();let o=e.getRandomCityIndex(i,t);const d=e.getLengthChangeFromSwappingCities(i,o),f=Math.random(),y=Math.exp(-Math.abs(d)/t);if(d>0||0!=d&&f<=y){e.swapCitiesByIndex(i,o),u=e;let t=e.length();g=t,t<a&&(a=t,c=e)}h++}return c}static greedy(t){if(t.cities.length<4)return t;for(let e=0;e<t.cities.length-1;e++){let i=e+1,n=1/0;for(let s=i;s<t.cities.length;s++){let o=t.cities[e].distanceFromCity(t.cities[s]);o<n&&(i=s,n=o)}t.swapCitiesByIndex(e+1,i)}return t}static bogo(t){return t.randomizeRoute(),t}static force(t){if(t.cities.length>9)return alert("Brute force is slow. Very slow. It will likely take minutes if not much longer, so the algorithm was aborted. Please delete cities or choose another algorithm."),t;let e=t.length(),i=new l(t.cities);return l.getPermutations(t).forEach(t=>{let n=new l(t);const s=n.length();s<e&&(e=s,i=n)}),i}static uncross(t,e){e||(t=d.greedy(t));let i,n=t.length();do{i=n;for(let e=0;e<t.cities.length;e++)for(let i=e+1;i<t.cities.length;i++){if(e==i)continue;const s=new l(t.cities);s.getLengthChangeFromSwappingCities(e,i)>0&&(s.swapCitiesByIndex(e,i),t=s,n=s.length())}}while(t.length().toFixed(2)!=i.toFixed(2));return t}static speedyAnnealing(t){function e(t,e,i){return i*(1-t/e)+1e-4}const i=3*t.cities.length,n=50*i;let s=0,o=t.length(),r=new l(t.cities),h=r,a=o;for(;s<n;){let t=e(s,n,i);const c=new l(h.cities),d=c.getRandomCityIndex();let u=c.getRandomCityIndex(d,t);const g=c.getLengthChangeFromSwappingCities(d,u),f=Math.random(),y=Math.exp(-Math.abs(g)/t);if(g>0||0!=g&&f<=y){c.swapCitiesByIndex(d,u),h=c;let t=c.length();a=t,t<o&&(o=t,r=c)}s++}return r}static speedy(t,e){if(null!=e){let i=t.cities.indexOf(e),n=!1;for(let e=0;e<t.cities.length;e++){if(e==i)continue;const s=new l(t.cities);if(s.getLengthChangeFromSwappingCities(e,i)>0){s.swapCitiesByIndex(e,i),t=s,n=!0;break}}return n?(t=d.speedyAnnealing(t),d.uncross(t)):t}return t=d.greedy(t),t=d.speedyAnnealing(t),t=d.uncross(t,!0)}}function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class g{constructor(t,e,i){u(this,"xPos",void 0),u(this,"yPos",void 0),u(this,"canvas",void 0),f.set(this,{writable:!0,value:"#757575"}),this.canvas=i,this.move(t,e)}draw(t,e,i){if(e){const e=.5*i,n=e/2,s=1.25*e,o=s/2;t.drawImage(g.houseImage,this.xPos-o,this.yPos-n,s,e)}else t.beginPath(),t.arc(this.xPos,this.yPos,g.radius,0,2*Math.PI),t.fillStyle=function(t,e){var i=e.get(t);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(t):i.value}(this,f),t.fill()}pointIsInCity(t,e){return this.distanceFromPoint(t,e)<g.radius}distanceFromPoint(t,e){return Math.sqrt((t-this.xPos)**2+(e-this.yPos)**2)}distanceFromCity(t){return Math.sqrt((t.xPos-this.xPos)**2+(t.yPos-this.yPos)**2)}move(t,e){t<g.radius&&(t=g.radius),e<g.radius&&(e=g.radius),t>this.canvas.getBoundingClientRect().width-g.radius&&(t=this.canvas.getBoundingClientRect().width-g.radius),e>this.canvas.getBoundingClientRect().height-g.radius&&(e=this.canvas.getBoundingClientRect().height-g.radius),this.xPos=t,this.yPos=e}}var f=new WeakMap;function y(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}u(g,"radius",10),u(g,"houseImage",new Image);class m{constructor(t,e,i,n){y(this,"xPos",void 0),y(this,"yPos",void 0),y(this,"width",void 0),y(this,"height",void 0),p.set(this,{writable:!0,value:"#007A00"}),this.xPos=t,this.yPos=e,this.width=i,this.height=n}draw(t,e,i){let n=e/4;t.beginPath(),t.moveTo(this.xPos*e+n,this.yPos*i),t.lineTo((this.xPos+this.width)*e-n,this.yPos*i),t.quadraticCurveTo((this.xPos+this.width)*e,this.yPos*i,(this.xPos+this.width)*e,this.yPos*i+n),t.lineTo((this.xPos+this.width)*e,(this.yPos+this.height)*i-n),t.quadraticCurveTo((this.xPos+this.width)*e,(this.yPos+this.height)*i,(this.xPos+this.width)*e-n,(this.yPos+this.height)*i),t.lineTo(this.xPos*e+n,(this.yPos+this.height)*i),t.quadraticCurveTo(this.xPos*e,(this.yPos+this.height)*i,this.xPos*e,(this.yPos+this.height)*i-n),t.lineTo(this.xPos*e,this.yPos*i+n),t.quadraticCurveTo(this.xPos*e,this.yPos*i,this.xPos*e+n,this.yPos*i),t.fillStyle=function(t,e){var i=e.get(t);if(!i)throw new TypeError("attempted to get private field on non-instance");return i.get?i.get.call(t):i.value}(this,p),t.fill()}}var p=new WeakMap;let w,v;const b=window.devicePixelRatio||1;let P,C,x,M,B,I,R,E,k,F=new l,S=[];let L={force:"<b>Brute Force Algorithm</b>: Checks every possible path, guarantees shortest path",greedy:"<b>Greedy Algorithm</b>: Each node goes to the next closest node, finds suboptimal path excluding trivial cases",hillClimber:"<b>Hill Climber Algorithm</b>: Compares tiny changes to current path, chooses better one",annealing:"<b>Annealing Algorithm</b>: Like hill climber but avoids local minimums",genetic:"<b>Genetic Algorithm</b>: Simulates all of human life",uncross:"<b>Uncrossing Algorithm</b>: Chooses random path, then uncrosses intersections",speedy:"<b>Speedy Algorithm</b>: A custom algorithm that combines greedy, annealing, and uncrossing algorithms",bogo:"<b>Bogo-Style Algorithm</b>: Chooses random path, odds of finding shortest path is 1:(n - 1)!"};function T(t=!1){let e=performance.now();F=t?d.optimize(F,M,w,P):d.optimize(F,M,w);let i=performance.now();B.innerHTML=(i-e).toFixed(3),F.draw(v,S,E,k,R),I.innerHTML=""+F.length().toFixed(0)}function A(t){return[t.clientX-w.getBoundingClientRect().left,t.clientY-w.getBoundingClientRect().top]}function O(t){if(!(3==t.which||2==t.button)){if(1==R){if(C=_(A(t)),0==W(C))return}else C=A(t);let i=(null==e&&(e=C),F.positionInCity(e[0],e[1]));i.length?P=i[0]:function(t){let e,i;R?(e=C[0],i=C[1]):(e=t.clientX-w.getBoundingClientRect().left-g.radius/2,i=t.clientY-w.getBoundingClientRect().top-g.radius/2);let n=new g(e,i,w);F.addCity(n),T()}(t)}var e;x=!0}function q(t){P&&x&&(F.removeCity(P),T()),x=void 0,P=void 0}function j(t){if(P)if(R){let e=_(A(t));e[0]==P.xPos&&e[1]==P.yPos||W(e)&&0==F.positionInCity(e[0],e[1]).length&&(P.move(e[0],e[1]),T(!0))}else{let e=A(t);P.move(e[0],e[1]),T(!0)}x=!1}function W(t){const e=v.getImageData(t[0]*b,t[1]*b,1,1).data;return 23!=e[0]&&23!=e[1]&&23!=e[2]&&255==e[3]}function _(t){return function(t){let e=Math.floor(t[0]*E+E/2),i=Math.floor(t[1]*k+k/2);return[e,i]}(function(t){let e=Math.floor(t[0]/E),i=Math.floor(t[1]/k);return[e,i]}(t))}function z(t,e){let i=window.innerWidth,n=window.innerHeight;n-=document.querySelector("#top-navbar").getBoundingClientRect().height,n-=document.querySelector("#bottom-navbar").getBoundingClientRect().height,i*=b,n*=b,function(t,e,i,n){if(F.cities.length){const s=i/t,o=n/e;F.cities.forEach(t=>{t.canvas=w,t.move(Math.round(t.xPos*s),Math.round(t.yPos*o))})}}(t.width,t.height,i,n),t.width=i,t.height=n,v=t.getContext("2d"),v.scale(b,b),0!=e&&T()}function H(){M=document.getElementById("algorithm-mode").value,F.randomizeRoute(),T(),document.querySelector("#algorithm-descriptions").innerHTML=L[M]}function N(t){const e=w.getBoundingClientRect().width,i=w.getBoundingClientRect().height,n=g.radius;if(F.clear(),F.draw(v,S,E,k,R),!R){for(let s=0;s<t;s++){const t=new g(Math.floor(Math.random()*(e-2*n))+n,Math.floor(Math.random()*(i-2*n))+n,w);F.addCity(t)}H()}}function D(){R?function(){const t=w.getBoundingClientRect().width,e=w.getBoundingClientRect().height,i=Math.floor(t/200);E=t/(4*i+1);const n=Math.round(e/(3*E+1));k=e/(3*n+1);for(let t=0;t<i;t++){let e=4*t+1;for(let t=0;t<n;t++){let i=3*t+1;S.push(new m(e,i,3,2))}}}():S=[]}function G(){F.clear(),T()}function X(t){R=t.currentTarget.checked,D(),N(200)}window.addEventListener("DOMContentLoaded",(function(){var t;w=document.querySelector("canvas"),B=document.querySelector("#timing"),I=document.querySelector("#length"),z(t=w,!1),t.addEventListener("mousedown",O),t.addEventListener("mouseup",q),t.addEventListener("mousemove",j),R=document.getElementById("mode").checked,g.houseImage.src="/assets/house.svg",document.getElementById("algorithm-mode").addEventListener("change",H),document.getElementById("clear-board").addEventListener("click",G),document.getElementById("random-board").addEventListener("click",()=>N(200)),document.getElementById("mode").addEventListener("change",X),window.addEventListener("resize",()=>z(w)),D(),N(200)}))}]);